(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{116:function(e,t,n){},125:function(e,t,n){"use strict";n.r(t);var a,c,r=n(0),i=n.n(r),s=n(41),o=n.n(s),u=(n(116),n(15)),l=n(17),d=n.n(l),p=n(30),j=n(13),b=n(46),f=n(189),h=n(190),m=n(191),O=n(182),v=n(193),x=n(178),g=n(194),_=n(195),w=n(174),y=n(192),C=n(196),S=n(24),M=n(173),D=n(180),I=n(181),N=n(175),E=n(179),T=n(2),U=function(e){var t=e.list,n=e.name,a=e.title,c=e.validate,r=e.disabled,i=t||[];return Object(T.jsx)(b.a,{name:n,validate:c,children:function(e){var t=e.input;e.meta;return Object(T.jsx)(w.a,{placement:"right",title:r?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043b\u044f":"",children:Object(T.jsxs)(D.a,{children:[Object(T.jsx)(I.a,{htmlFor:n,children:a}),Object(T.jsx)(N.a,Object(S.a)(Object(S.a)({disabled:r},t),{},{label:a,className:"UMC-widget-input UMC-widget-select",children:i.map((function(e){return Object(T.jsx)(E.a,{value:e.value,children:e.name},e.id)}))}))]})})}})},A=function(e){return e.map((function(e){return"string"===typeof e?{id:e,value:e,name:e}:{id:e.id,value:e.id,name:e.name}}))},k=function(e){return e<10?"0"+e:String(e)},z=new Date,L=function(e,t){var n=e.getMonth(),a=new Date(e),c=function(e){return function(t){return!(t<z)&&!!e&&e.some((function(e){return!!e&&e.some((function(e){var n=new Date(e[0]);return F(t,n)}))}))}}(t);a.setDate(1);for(var r=function(e){var t=[];if(1!==e){var n={name:0,free:!1,empty:!0};if(0===e)for(var a=0;a<6;a++)t.push(n);else for(var c=1;c<e;c++)t.push(n)}return t}(a.getDay());a.getMonth()===n;){var i={name:a.getDate(),free:c(a)};r.push(i),a.setDate(a.getDate()+1)}return r},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;return!(!e||!t)&&(e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())},P=n(184),G=n(186),R=n(188),Y=n(170),q=n(171),V=n(172);!function(e){e.SITE_MAIN="https://longavitas.ru",e.SITE_SECOND="https://longavita-ct.ru",e.SITE_DEV="http://localhost:3000"}(a||(a={})),function(e){e.SITE_MAIN="058826cf-b50f-11e9-a205-ac1f6b67f28a",e.SITE_SECOND="9d050044-1007-11ec-a220-ac1f6b67f28a"}(c||(c={}));var W,B=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],J=["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"],H=function(e){var t,n,a=e.name,c=e.title,i=e.validate,s=e.disabled,o=e.state,u=Object(r.useState)(!1),l=Object(j.a)(u,2),d=l[0],p=l[1],O=Object(r.useState)(new Date),v=Object(j.a)(O,2),x=v[0],g=v[1],_=Object(r.useState)(null),C=Object(j.a)(_,2),S=C[0],M=C[1],N=Object(b.c)("doctor"),E=N.input.value?[null===o||void 0===o||null===(t=o.doctors)||void 0===t?void 0:t.find((function(e){return e.id===N.input.value})).time]:null===o||void 0===o||null===(n=o.doctors)||void 0===n?void 0:n.map((function(e){return e.time})),U=Object(r.useMemo)((function(){return L(x,E)}),[N.input.value,x]),A=function(e){p(e)},k=function(e){g(e?function(e){var t=new Date(e);return t.setMonth(e.getMonth()+1),t}:function(e){var t=new Date(e);return t.setMonth(e.getMonth()-1),t})};return Object(T.jsx)(b.a,{name:a,validate:i,children:function(e){var t=e.input;e.meta;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(w.a,{placement:"right",title:s?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043b\u044f":"",children:Object(T.jsxs)(D.a,{variant:"outlined",children:[Object(T.jsx)(I.a,{htmlFor:"date",children:c}),Object(T.jsx)(P.a,{onFocus:function(){return A(!0)},id:"date",type:"text",value:t.value,disabled:s,endAdornment:Object(T.jsx)(G.a,{position:"end",children:Object(T.jsx)(R.a,{disabled:s,onClick:function(){return A(!0)},edge:"end",children:Object(T.jsx)(Y.a,{})})}),label:c})]})}),Object(T.jsx)(f.a,{onClose:function(){return A(!1)},open:d,disableRestoreFocus:!0,children:Object(T.jsxs)("div",{className:"UMC-widget-calendar-wrapper",children:[Object(T.jsx)(h.a,{children:Object(T.jsxs)("div",{className:"UMC-widget-calendar-header",children:[Object(T.jsx)(R.a,{onClick:function(){return k(!1)},children:Object(T.jsx)(q.a,{})}),Object(T.jsxs)("div",{className:"UMC-widget-calendar-header__text",children:[B[x.getMonth()]," ",x.getFullYear()]}),Object(T.jsx)(R.a,{onClick:function(){return k(!0)},children:Object(T.jsx)(V.a,{})})]})}),Object(T.jsxs)(m.a,{children:[Object(T.jsx)("div",{className:"UMC-widget-calendar__header UMC-widget-calendar__grid",children:J.map((function(e){return Object(T.jsx)("div",{className:"UMC-widget-calendar__box UMC-widget-calendar__box_header",children:e},e)}))}),Object(T.jsx)("div",{className:"UMC-widget-calendar__grid",children:U.map((function(e){var t=new Date(x);t.setDate(e.name);var n=F(t),a="text";return n&&(a="outlined"),F(t,S)?Object(T.jsx)("div",{className:"UMC-widget-calendar__box UMC-widget-calendar__box_selected",children:e.name},e.name):e.free?Object(T.jsx)("div",{className:"UMC-widget-calendar__box",children:Object(T.jsx)(y.a,{onClick:function(){return M(t)},variant:a,size:"small",className:"UMC-widget-calendar__box",type:"submit",children:e.name},e.name)}):e.empty?Object(T.jsx)("p",{}):Object(T.jsx)("div",{className:n?"UMC-widget-calendar__box UMC-widget-calendar__box_busy UMC-widget-calendar__box_outlined":"UMC-widget-calendar__box UMC-widget-calendar__box_busy",children:e.name},e.name)}))})]})]})})]})}})},K=function(e){var t=e.values,n=e.state,a=e.getData,c=[{id:2,name:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1",value:1},{id:3,name:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 2",value:2},{id:4,name:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 3",value:3}],i=[{list:n.clinics?A(n.clinics):c,name:"clinic",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0438\u043b\u0438\u0430\u043b",type:"select",id:1},{list:n.specializations?A(n.specializations):c,name:"specialization",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e",type:"select",id:2,deps:["clinic"]},{list:n.doctors?A(n.doctors.filter((function(e){return e.specialization===t.specialization}))):c,name:"doctor",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0430\u0447\u0430",type:"select",id:3,deps:["clinic","specialization"]},{name:"date",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u043c\u0430",type:"date",id:4,state:n,deps:["clinic","specialization","doctor"]}];return Object(r.useEffect)((function(){t.clinic&&a&&a(t.clinic)}),[t.clinic]),Object(T.jsx)(M.a,{spacing:2,children:i.map((function(e){var n=!!e.deps&&function(e,t){return e.some((function(e){return!(e in t&&t[e])}))}(e.deps,t);return"select"===e.type?Object(T.jsx)(U,Object(S.a)(Object(S.a)({},e),{},{disabled:n}),e.id):"date"===e.type?Object(T.jsx)(H,Object(S.a)({disabled:n},e),e.id):void 0}))})},Q=n(63),X=n(64);!function(e){e.API_URL="https://longavitas.ru/lib/widget/send.php",e.API_LOGIN="admin",e.API_PASSWORD="admin"}(W||(W={}));var Z,$=function(){function e(){Object(Q.a)(this,e)}return Object(X.a)(e,[{key:"get",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",params:t},e.abrupt("return",this.request(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",params:n},e.abrupt("return",this.request(a,t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,c,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:void 0,e.prev=1,a=W.API_URL+(t.params?this.getParamsFromObject(t.params):""),e.next=5,fetch(a,{method:t.method,body:n,headers:{Authorization:"Basic "+btoa(W.API_LOGIN+":"+W.API_PASSWORD)}});case 5:return c=e.sent,e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getParamsFromObject",value:function(e){return"?"+Object.entries(e).map((function(e){return e.join("=")})).join("&")}}]),e}(),ee=new $,te=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ee.get({type:"clinic"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,n=a.getFullYear()+"-"+k(a.getMonth()+1)+"-"+k(a.getDate())+"T"+k(a.getHours())+":"+k(a.getMinutes())+":00",e.abrupt("return",ee.get({type:"time",clinicId:t,startDate:n}));case 2:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.SET_CLINICS="SET_CLINICS",e.SET_LOADING="SET_LOADING",e.SET_DATA="SET_DATA"}(Z||(Z={}));var ae=function(e){return{type:Z.SET_LOADING,payload:e}},ce=function(e){return{type:Z.SET_DATA,payload:e}},re={clinics:null,loading:!1,doctors:null,specializations:null},ie=function(e,t){switch(t.type){case Z.SET_CLINICS:return Object(S.a)(Object(S.a)({},e),{},{clinics:t.payload});case Z.SET_LOADING:return Object(S.a)(Object(S.a)({},e),{},{loading:t.payload});case Z.SET_DATA:return Object(S.a)(Object(S.a)({},e),{},{doctors:t.payload.doctors,specializations:t.payload.specializations});default:return e}},se=function(){var e=Object(r.useState)(!0),t=Object(j.a)(e,2),n=t[0],i=(t[1],Object(r.useState)(0)),s=Object(j.a)(i,2),o=s[0],u=(s[1],Object(r.useReducer)(ie,re)),l=Object(j.a)(u,2),S=l[0],M=l[1],D=Object(r.useContext)(ue);console.log(S);var I={clinic:D===a.SITE_DEV?c.SITE_MAIN:c.SITE_SECOND},N=[{id:1,title:"\u0412\u044b\u0431\u043e\u0440 \u0432\u0440\u0430\u0447\u0430",completed:!1},{id:2,title:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",completed:!1}],E=[K][o],U=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(ae(!0)),e.next=3,te();case 3:t=e.sent,M((n=t,{type:Z.SET_CLINICS,payload:n})),M(ae(!1));case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(ae(!0)),e.next=3,ne(t);case 3:n=e.sent,a={doctors:[],specializations:[]},n.forEach((function(e){var t={id:e.employee.id,time:e.time,name:e.employee.name,specialization:e.employee.spec};e.employee.spec&&(a.doctors.push(t),a.specializations.includes(e.employee.spec)||a.specializations.push(e.employee.spec))})),M(ce(a)),M(ae(!1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){A()}),[]),console.log(),Object(T.jsxs)(f.a,{maxWidth:"xl",open:n,children:[Object(T.jsx)(b.b,{onSubmit:U,initialValues:I,children:function(e){var t=e.handleSubmit,n=e.values;return Object(T.jsxs)("form",{className:"UMC-widget-wrapper",onSubmit:t,children:[Object(T.jsx)(h.a,{children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0430 \u043f\u0440\u0438\u0435\u043c"}),Object(T.jsxs)(m.a,{children:[Object(T.jsx)(O.a,{className:"UMC-widget-steps__header",activeStep:o,children:N.map((function(e){return Object(T.jsx)(v.a,{completed:e.completed,children:Object(T.jsx)(x.a,{children:e.title})},e.id)}))}),Object(T.jsx)(g.a,{className:"UMC-widget-content",children:Object(T.jsx)(E,{getData:k,state:S,values:n})})]}),Object(T.jsx)(_.a,{className:"UMC-widget-btn-area",children:Object(T.jsx)(w.a,{placement:"top",title:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f",children:Object(T.jsx)(y.a,{type:"submit",children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433"})})})]})}}),S.loading&&Object(T.jsx)(g.a,{className:"UMC-widget-loading-screen",sx:{display:"flex"},children:Object(T.jsx)(C.a,{})})]})},oe="/",ue=i.a.createContext(window.location.origin),le=function(){return Object(T.jsx)(u.c,{children:Object(T.jsx)(u.a,{path:oe,children:Object(T.jsx)(se,{})})})},de=n(77);o.a.render(Object(T.jsx)(de.a,{hashType:"noslash",children:Object(T.jsx)(le,{})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.abec9046.chunk.js.map