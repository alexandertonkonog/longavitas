{"version":3,"sources":["components/Widget/index.constant.ts","components/fields/Select.tsx","utils/index.util.ts","components/fields/Calendar.tsx","store/store.constants.ts","utils/validate.util.ts","components/DoctorSelect/index.tsx","api/index.constant.ts","api/index.ts","api/data.api.ts","store/action-creators.ts","store/index.ts","components/fields/Input.tsx","components/fields/CheckboxInput.tsx","components/fields/MaskedInput.tsx","components/Personal/index.tsx","components/Result/index.tsx","components/Widget/index.tsx","App.tsx","index.tsx"],"names":["SiteAdresses","ClinicIds","SelectInput","resetHandle","resetDeps","list","name","title","validate","disabled","itemList","input","meta","Tooltip","FormControl","InputLabel","className","touched","error","htmlFor","CircularProgress","Select","onChange","event","target","value","label","map","item","MenuItem","id","FormHelperText","Months","DaysOfWeek","mapStateToSelectList","getStartNull","num","String","getISODate","date","getFullYear","getMonth","getDate","getHours","getMinutes","now","Date","isEqualDate","first","second","getVisibleTime","getVisibleDateTime","getVisibleDate","getDateForCalendarTitle","getDay","getMonthGenitive","month","monthName","lastChar","length","replace","formatFormValues","values","address","result","sourceCode","SITE_MAIN","Object","entries","forEach","key","localValue","day","slice","year","trim","nowPlusMonth","setMonth","ActionTypes","Calendar","state","useState","isOpen","setIsOpen","setDate","dateList","useMemo","doctor","specialization","schedule","filter","count","localDate","dateItem","time","doctorItem","doctors","find","doc","duration","startTime","timeStart","endTime","timeEnd","thisDate","thisDateStr","setMinutes","indexElem","findIndex","elem","push","timeItem","getDateList","form","useForm","changeCalendarVisibility","val","changeCalendarMonth","vector","prev","color","variant","OutlinedInput","onFocus","type","console","log","endAdornment","InputAdornment","position","IconButton","onClick","edge","CalendarToday","Dialog","fullScreen","screenWidth","PaperProps","style","maxWidth","onClose","open","disableRestoreFocus","DialogTitle","size","ArrowBackIosNew","ArrowForwardIos","Close","DialogContent","timeIndex","change","getTime","isRequired","isLength","min","max","DoctorSelect","siteAddress","useContext","SITE_ADDRESS","formValues","getState","isKT","clinic","SITE_SECOND","selectList","clinics","order","Array","from","Set","deps","includes","setInitialValues","initialData","initialNode","document","getElementById","textContent","JSON","parse","getDataFromInitialNode","batch","SITE_DEV","changeClinic","spec","thisClinic","sortedSelectList","sort","a","b","useEffect","loading","Stack","spacing","parent","some","hasntValue","APIConstants","API","urlParams","params","method","this","request","data","undefined","url","getParamsFromObject","fetch","body","stringify","headers","Authorization","btoa","response","json","object","join","getData","startDate","get","setAppointment","setLoadingAC","payload","SET_LOADING","initialState","specializations","documentElement","clientWidth","appointment","rootReducer","action","SET_DATA","SET_WIDTH","SET_APPOINTMENT_DATA","Input","props","TextField","width","FormControlLabel","control","Checkbox","TextMaskCustom","React","forwardRef","ref","mask","other","onBlur","onAccept","inputRef","overwrite","MaskedInput","inputComponent","inputProps","Personal","inputListArr","visibility","visibleName","inputList","setInputList","CheckboxInput","Button","Result","useParams","history","useHistory","isError","status","text","getResultText","Icon","ErrorOutlineIcon","CheckCircleOutlineIcon","Grid","container","marginTop","xs","fontSize","Typography","marginBottom","DialogActions","btnCallback","Widget","setCount","activeStep","setActiveStep","useReducer","dispatch","steps","VisibleComponent","makeAppointment","sendValues","handleSubmit","reset","localGetData","changeWindowWidth","window","addEventListener","removeEventListener","path","exact","onSubmit","initialValues","confirm","hasValidationErrors","Stepper","orientation","completed","Step","StepLabel","Box","fields","startIcon","placement","sx","display","Paths","createContext","location","origin","App","ReactDOM","render","hashType"],"mappings":"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","file":"static/js/main.8d79e6c6.chunk.js","sourcesContent":["export enum SiteAdresses {\r\n    SITE_MAIN = 'https://longavitas.ru',\r\n    SITE_SECOND = 'https://longavita-ct.ru',\r\n    SITE_DEV = 'http://localhost:3000',\r\n}\r\n\r\nexport enum ClinicIds {\r\n    SITE_MAIN = '058826cf-b50f-11e9-a205-ac1f6b67f28a',\r\n    SITE_SECOND = '9d050044-1007-11ec-a220-ac1f6b67f28a',\r\n}\r\n\r\nexport const Months = [\r\n  'Январь',\r\n  'Февраль',\r\n  'Март',\r\n  'Апрель',\r\n  'Май',\r\n  'Июнь',\r\n  'Июль',\r\n  'Август',\r\n  'Сентябрь',\r\n  'Октябрь',\r\n  'Ноябрь',\r\n  'Декабрь',\r\n];\r\n\r\nexport const DaysOfWeek = [\r\n  'Вс',\r\n  'Пн',\r\n  'Вт',\r\n  'Ср',\r\n  'Чт',\r\n  'Пт',\r\n  'Сб',\r\n];","import React, { FC } from 'react';\r\nimport { Field } from 'react-final-form';\r\nimport {\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Tooltip,\r\n  FormHelperText,\r\n  SelectChangeEvent, CircularProgress\r\n} from \"@mui/material\";\r\n\r\nimport { ISelect } from \"./input.types\";\r\n\r\nconst SelectInput: FC<ISelect> = ({\r\n  resetHandle,\r\n  resetDeps,\r\n  list,\r\n  name,\r\n  title,\r\n  validate,\r\n  disabled\r\n}) => {\r\n  const itemList = list || [];\r\n  return (\r\n    <Field name={name} validate={validate}>\r\n      {({input, meta}) => {\r\n        const onChangeHandle = (event: SelectChangeEvent) => {\r\n          resetHandle && resetHandle(resetDeps);\r\n          input.onChange(event.target.value);\r\n        }\r\n        return (\r\n          <Tooltip title={disabled ? 'Заполните предыдущие поля' : ''}>\r\n            <FormControl>\r\n              <InputLabel\r\n                className={!disabled && meta.touched && meta.error && 'UMC-widget-input-error'}\r\n                htmlFor={name}>\r\n                {list ? title : <CircularProgress />}\r\n              </InputLabel>\r\n              <Select\r\n                error={!!(meta.touched && meta.error)}\r\n                disabled={disabled}\r\n                {...input}\r\n                onChange={onChangeHandle}\r\n                label={title}\r\n                className={'UMC-widget-input UMC-widget-select'}>\r\n                {itemList.map(item => (\r\n                  <MenuItem key={item.id} value={item.value}>{item.name}</MenuItem>\r\n                ))}\r\n              </Select>\r\n              {!disabled && meta.touched && meta.error\r\n                && <FormHelperText\r\n                    className={'UMC-widget-input-error'}>\r\n                  {meta.error}\r\n                </FormHelperText>}\r\n            </FormControl>\r\n          </Tooltip>\r\n        );\r\n      }}\r\n    </Field>\r\n  );\r\n};\r\n\r\nexport default SelectInput;","import { TSelectItem, TCalendarItem, TCalendarTimeItem } from \"../components/fields/input.types\";\r\nimport { TAppState, TClinicItem, TDoctorItem, TFormValues, TScheduleItem } from \"../store/store.types\";\r\nimport { DaysOfWeek, Months, SiteAdresses } from \"../components/Widget/index.constant\";\r\n\r\nexport const mapStateToSelectList = <Type extends TClinicItem | TDoctorItem>(list: Type[] | null | undefined): TSelectItem[] | [] => {\r\n  if (!list) return [];\r\n  return list.map(item => {\r\n    return {id: item.id, value: item.id, name: item.name};\r\n  });\r\n};\r\n\r\nexport const mapSpecializationsToSelectList = (list: TScheduleItem[] | null | undefined): TSelectItem[] | [] => {\r\n  if (!list) return [];\r\n  const specializations = Array.from(\r\n    new Set(list.filter(item => item.specialization).map(item => item.specialization))\r\n  );\r\n  return specializations.map(item => (\r\n    {id: item, value: item, name: item}\r\n  ));\r\n};\r\n\r\nexport const getStartNull = (num: number): string => {\r\n  if (num < 10) {\r\n    return '0' + num;\r\n  }\r\n  return String(num);\r\n};\r\n\r\nexport const getISODate = (date: Date): string => {\r\n  return date.getFullYear() + '-'\r\n    + getStartNull(date.getMonth() + 1) + '-'\r\n    + getStartNull(date.getDate()) + 'T'\r\n    + getStartNull(date.getHours()) + ':'\r\n    + getStartNull(date.getMinutes()) + ':00';\r\n};\r\n\r\nexport const getISOTime = (date: Date): string => {\r\n  return getStartNull(date.getHours()) + ':'\r\n    + getStartNull(date.getMinutes());\r\n};\r\n\r\nconst now = new Date();\r\n\r\nexport const isFreeDate = (time: (string[][] | undefined)[] | undefined) => (date: Date): boolean => {\r\n  if (date < now) return false;\r\n  if (!time) return false;\r\n  return time.some(item => {\r\n    if (!item) return false;\r\n    return item.some(elem => {\r\n      const now = new Date(elem[0]);\r\n      return isEqualDate(date, now);\r\n    });\r\n  })\r\n};\r\n\r\nexport const getDateList = (\r\n  date: Date,\r\n  state: TAppState,\r\n  { doctor, specialization }: TFormValues\r\n): TCalendarItem[] | null => {\r\n  if (!specialization) {\r\n    return null;\r\n  }\r\n  const schedule = doctor\r\n    ? state.schedule?.filter(item => item.doctor === doctor)\r\n    : state.schedule?.filter(item => item.specialization === specialization);\r\n\r\n  let count = 0;\r\n  const localDate = new Date(date);\r\n  const result: TCalendarItem[] = [];\r\n  while(count < 5) {\r\n    const dateItem: TCalendarItem = {\r\n      date: new Date(localDate),\r\n      time: []\r\n    };\r\n\r\n    schedule!.forEach(item => {\r\n      const doctorItem = state.doctors!.find(doc => doc.id === item.doctor);\r\n      const duration = doctorItem!.duration;\r\n      item.time.forEach(time => {\r\n        const startTime = new Date(time.timeStart);\r\n        if (isEqualDate(startTime, localDate)) {\r\n          const endTime = new Date(time.timeEnd);\r\n          while (startTime < endTime) {\r\n            const thisDate = new Date(startTime);\r\n            const thisDateStr = getVisibleTime(thisDate);\r\n            startTime.setMinutes(startTime.getMinutes() + duration);\r\n            if (startTime <= endTime) {\r\n              const indexElem = dateItem.time.findIndex(elem => elem.time === thisDateStr);\r\n              if (indexElem >= 0) {\r\n                dateItem.time[indexElem].doctors.push(doctorItem!.id);\r\n              } else {\r\n                const timeItem: TCalendarTimeItem = {\r\n                  date: thisDate,\r\n                  time: thisDateStr,\r\n                  doctors: [doctorItem!.id],\r\n                };\r\n                dateItem.time.push(timeItem);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      })\r\n    })\r\n    localDate.setDate(localDate.getDate() + 1);\r\n    result.push(dateItem);\r\n    count++;\r\n  }\r\n  return result\r\n    // .filter(item => item.time.length);\r\n}\r\n\r\n// const getTimeItems = (): TCalendarTimeItem => {\r\n//\r\n// }\r\n\r\nexport const isEqualDate = (first: Date | null, second: Date | null = now): boolean => {\r\n  if (!first || !second) return false;\r\n  return first.getDate() === second.getDate()\r\n    && first.getMonth() === second.getMonth()\r\n    && first.getFullYear() === second.getFullYear();\r\n}\r\n\r\nexport const isEqualTime = (first: Date | null, second: Date | null = now): boolean => {\r\n  if (!first || !second) return false;\r\n  return first.getHours() === second.getHours()\r\n    && first.getMinutes() === second.getMinutes();\r\n}\r\n\r\nexport const getTimeByDate = (date: Date | null, time: (string[][] | undefined)[] | undefined): Date[] => {\r\n  if (!time || !date) return [];\r\n  const result: Date[] = [];\r\n  time.forEach(item => {\r\n    item?.forEach(elem => {\r\n      elem.forEach(dateStr => {\r\n        const thisDate = new Date(dateStr);\r\n        if (isEqualDate(thisDate, date)) {\r\n          result.push(thisDate);\r\n        }\r\n      })\r\n    });\r\n  });\r\n  return Array.from(new Set(result));\r\n}\r\n\r\nexport const getVisibleDate = (date: Date | null): string => {\r\n  if (!date) return '';\r\n  return getStartNull(date.getDate()) + '.'\r\n    + getStartNull(date.getMonth() + 1) + '.'\r\n    + date.getFullYear();\r\n}\r\n\r\nexport const getVisibleTime = (date: Date | null): string => {\r\n  if (!date) return '';\r\n  return getStartNull(date.getHours()) + ':'\r\n    + getStartNull(date.getMinutes());\r\n}\r\n\r\nexport const getVisibleDateTime = (date: Date | null): string => {\r\n  if (!date) return '';\r\n  return getVisibleDate(date) + ' ' + getVisibleTime(date);\r\n}\r\n\r\nexport const getDateForCalendarTitle = (date: Date | null): string => {\r\n  if (!date) return '';\r\n  return `${DaysOfWeek[date.getDay()]}, ${date.getDate()} ${getMonthGenitive(date.getMonth())}`;\r\n}\r\n\r\nexport const getMonthGenitive = (month: number): string => {\r\n  const monthName = Months[month];\r\n  if (month === 2) {\r\n    return monthName + 'а';\r\n  }\r\n  const lastChar = monthName[monthName.length - 1];\r\n  return monthName.replace(lastChar, 'я');\r\n}\r\n\r\ntype TAppointmentValues = {[key: string]: string | number | boolean};\r\n\r\nexport const formatFormValues = (values: TFormValues, address: string): TAppointmentValues => {\r\n  const result: TAppointmentValues = {\r\n    sourceCode: address === SiteAdresses.SITE_MAIN ? 38 : 141,\r\n  };\r\n  const entries = Object.entries(values);\r\n  entries.forEach(([key, value]) => {\r\n    if (key === 'birthday') {\r\n      const localValue = value as string;\r\n      const day = +localValue.slice(0, 2);\r\n      const month = +localValue.slice(2, 4);\r\n      const year = +localValue.slice(4);\r\n      result[key] = getISODate(new Date(year, month + 1, day));\r\n    } else if (typeof value === 'string') {\r\n      result[key] = value.trim();\r\n    } else if (typeof value === 'object') {\r\n      result[key] = getISODate(values.date.date)\r\n    } else {\r\n      result[key] = value;\r\n    }\r\n  })\r\n  return result;\r\n}\r\n\r\ntype TNodeData = {\r\n  specialization?: string;\r\n  doctor?: string;\r\n}\r\n\r\nexport const getDataFromInitialNode = (): TNodeData | null => {\r\n  const initialNode = document.getElementById('UMC-widget-data');\r\n  if (!initialNode || !initialNode.textContent) return null;\r\n  const data = JSON.parse(initialNode.textContent) as TNodeData;\r\n  return data || null;\r\n}","import React, { FC, useState, useMemo } from 'react';\r\nimport { Field, useForm } from 'react-final-form';\r\n\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  FormControl,\r\n  IconButton,\r\n  InputAdornment,\r\n  InputLabel,\r\n  OutlinedInput,\r\n  Tooltip,\r\n  FormHelperText\r\n} from \"@mui/material\";\r\nimport { CalendarToday, ArrowBackIosNew, ArrowForwardIos, Close } from '@mui/icons-material';\r\n\r\nimport { ICalendar, TCalendarTimeItem } from \"./input.types\";\r\nimport {\r\n  getDateForCalendarTitle,\r\n  getDateList,\r\n  getVisibleDateTime,\r\n} from \"../../utils/index.util\";\r\n\r\ntype TIconColor = 'inherit' | 'error' | 'disabled';\r\nconst now = new Date();\r\nconst nowPlusMonth = new Date(now);\r\nnowPlusMonth.setMonth(nowPlusMonth.getMonth() + 1);\r\n\r\nconst Calendar: FC<ICalendar> = (\r\n  { name, title, validate, disabled, state, values }\r\n) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [date, setDate] = useState(now);\r\n  const dateList = useMemo(() => getDateList(date, state, values), [values.doctor, date, values.specialization]);\r\n  const form = useForm();\r\n\r\n  const changeCalendarVisibility = (val: boolean): void => {\r\n    setIsOpen(val);\r\n  }\r\n\r\n  const changeCalendarMonth = (vector: boolean): void => {\r\n    if (vector) {\r\n      setDate(prev => {\r\n        const localDate = new Date(prev);\r\n        localDate.setDate(prev.getDate() + 5);\r\n        return localDate;\r\n      })\r\n    } else {\r\n      setDate(prev => {\r\n        const localDate = new Date(prev);\r\n        localDate.setDate(prev.getDate() - 5);\r\n        if (now > localDate) {\r\n          return now;\r\n        }\r\n        return localDate;\r\n      })\r\n    }\r\n  }\r\n\r\n  // infinite reload\r\n  // useEffect(() => {\r\n  //   if (dateList?.every(item => !item.time.length)) {\r\n  //     changeCalendarMonth(true);\r\n  //   }\r\n  // }, [date])\r\n\r\n  return (\r\n    <Field name={name} validate={validate}>\r\n      {({input, meta}) => {\r\n        const onChange = (date: TCalendarTimeItem) => {\r\n          input.onChange(date);\r\n          if (date.doctors.length === 1) {\r\n            form.change('doctor', date.doctors[0]);\r\n          }\r\n          setIsOpen(false);\r\n        }\r\n        const value = getVisibleDateTime(input.value.date);\r\n        let color: TIconColor = 'inherit';\r\n        if (meta.touched && meta.error) color = 'error';\r\n        if (disabled) color = 'disabled';\r\n        return (\r\n          <>\r\n            <Tooltip title={disabled ? 'Заполните предыдущие поля' : ''}>\r\n              <FormControl variant=\"outlined\">\r\n                <InputLabel\r\n                  className={!disabled && meta.touched && meta.error && 'UMC-widget-input-error'}\r\n                  htmlFor=\"date\">\r\n                  {title}\r\n                </InputLabel>\r\n                <OutlinedInput\r\n                  error={!!(meta.touched && meta.error)}\r\n                  onFocus={() => changeCalendarVisibility(true)}\r\n                  id=\"date\"\r\n                  type={'text'}\r\n                  value={value}\r\n                  onChange={() => console.log(input.value)}\r\n                  disabled={disabled}\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <IconButton\r\n                        disabled={disabled}\r\n                        onClick={() => changeCalendarVisibility(true)}\r\n                        edge=\"end\"\r\n                      >\r\n                        <CalendarToday color={color} />\r\n                      </IconButton>\r\n                    </InputAdornment>\r\n                  }\r\n                  label={title}\r\n                />\r\n                {!disabled && meta.touched && meta.error\r\n                  && <FormHelperText\r\n                      className={'UMC-widget-input-error'}>\r\n                    {meta.error}\r\n                  </FormHelperText>}\r\n              </FormControl>\r\n            </Tooltip>\r\n            <Dialog\r\n              fullScreen={state.screenWidth <= 768}\r\n              PaperProps={{\r\n                style: {\r\n                  maxWidth: state.screenWidth <= 768 ? '100vw' : '95vw',\r\n                }\r\n              }}\r\n              onClose={() => changeCalendarVisibility(false)}\r\n              open={isOpen}\r\n              disableRestoreFocus\r\n            >\r\n              <div className={'UMC-widget-calendar-wrapper'}>\r\n                <DialogTitle>\r\n                  <div className={'UMC-widget-calendar-header'}>\r\n                    <IconButton\r\n                      disabled={now >= date}\r\n                      onClick={() => changeCalendarMonth(false)}\r\n                      size={state.screenWidth < 450 ? 'small' : 'medium'}\r\n                    >\r\n                      <ArrowBackIosNew />\r\n                    </IconButton>\r\n                    <div className={'UMC-widget-calendar-header__text UMC-widget-title'}>\r\n                      {getDateForCalendarTitle(date)}\r\n                    </div>\r\n                    <IconButton\r\n                      disabled={date >= nowPlusMonth}\r\n                      onClick={() => changeCalendarMonth(true)}\r\n                      size={state.screenWidth < 450 ? 'small' : 'medium'}\r\n                    >\r\n                      <ArrowForwardIos />\r\n                    </IconButton>\r\n                  </div>\r\n                  <IconButton\r\n                    className={'UMC-widget__btn-exit'}\r\n                    onClick={() => changeCalendarVisibility(false)}\r\n                  >\r\n                    <Close />\r\n                  </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                  <div className=\"UMC-widget-calendar-block\">\r\n                    <div className={'UMC-widget-calendar__grid'}>\r\n                      {dateList?.map(item => (\r\n                        <div key={item.date.getTime()} className={'UMC-widget-calendar__column'}>\r\n                          <h3 className={item.time.length\r\n                            ? 'UMC-widget-calendar__column-title'\r\n                            : 'UMC-widget-calendar__column-text_grey UMC-widget-calendar__column-title'}>\r\n                            {getDateForCalendarTitle(item.date)}\r\n                          </h3>\r\n                          <div className=\"UMC-widget-calendar__column-content\">\r\n                            {item.time.length\r\n                              ? item.time.map((time, timeIndex) => (\r\n                                <p\r\n                                  key={item.date.getTime() + timeIndex}\r\n                                  onClick={() => onChange(time)}\r\n                                  className={'UMC-widget-calendar__box UMC-widget-calendar__box_free'}>{time.time}</p>\r\n                              ))\r\n                              : <p className={'UMC-widget-calendar__column-text UMC-widget-calendar__column-text_grey'}>\r\n                                Нет времени для записи\r\n                              </p>\r\n                            }\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </DialogContent>\r\n              </div>\r\n            </Dialog>\r\n          </>\r\n        );\r\n      }}\r\n    </Field>\r\n  );\r\n};\r\n\r\nexport default Calendar;","export enum ActionTypes {\r\n  SET_CLINICS = 'SET_CLINICS',\r\n  SET_LOADING = 'SET_LOADING',\r\n  SET_DATA = 'SET_DATA',\r\n  SET_WIDTH = 'SET_WIDTH',\r\n  SET_APPOINTMENT_DATA = 'SET_APPOINTMENT_DATA',\r\n}","export const isRequired = (value: string | boolean): string | undefined => {\r\n  if (!value) return 'Это поле обязательно';\r\n}\r\n\r\nexport const isLength = (\r\n  min: number | undefined = 1,\r\n  max: number | undefined = 1\r\n) => (value: string): string | undefined => {\r\n  if (!value) return 'Это поле обязательно';\r\n  if (value.length < min) return `Длина поля должна быть не менее ${min} символов`;\r\n  if (value.length > max) return `Длина поля должна быть не более ${max} символов`;\r\n}","import React, { FC, useContext, useEffect } from 'react';\r\nimport { Stack } from \"@mui/material\";\r\n\r\nimport Select from \"../fields/Select\";\r\nimport { getDataFromInitialNode, mapSpecializationsToSelectList, mapStateToSelectList } from \"../../utils/index.util\";\r\n\r\nimport { ICalendar, ISelect } from \"../fields/input.types\";\r\nimport { TStepComponent } from \"./index.types\";\r\nimport { TFormValues } from \"../../store/store.types\";\r\nimport Calendar from \"../fields/Calendar\";\r\nimport { isRequired } from \"../../utils/validate.util\";\r\nimport { useForm } from \"react-final-form\";\r\nimport { ClinicIds, SiteAdresses } from \"../Widget/index.constant\";\r\nimport { SITE_ADDRESS } from \"../../App\";\r\n\r\nconst DoctorSelect: FC<TStepComponent> = ({resetHandle, state}) => {\r\n\r\n  const siteAddress = useContext(SITE_ADDRESS);\r\n  const form = useForm<TFormValues>();\r\n  const formValues = form.getState().values;\r\n\r\n  const isKT = formValues.clinic === ClinicIds.SITE_SECOND;\r\n\r\n  const selectList: (ISelect | ICalendar)[] = [\r\n    {list: mapStateToSelectList(state.clinics),\r\n      name: 'clinic',\r\n      validate: isRequired,\r\n      title: 'Выберите филиал',\r\n      type: 'select',\r\n      resetDeps: ['specialization', 'doctor', 'date'],\r\n      order: 1,\r\n      id: 1},\r\n    {list: mapSpecializationsToSelectList(state.schedule\r\n        ?.filter(item => item.clinic === formValues.clinic)),\r\n      name: 'specialization',\r\n      title: 'Выберите специализацию',\r\n      validate: isRequired,\r\n      type: 'select',\r\n      id: 2,\r\n      resetDeps: ['doctor', 'date'],\r\n      order: 2,\r\n      deps: ['clinic']},\r\n    {list: isKT\r\n        ? mapStateToSelectList(state.doctors?.filter(item => {\r\n          const doctor = state.schedule?.find(elem => elem.doctor === item.id);\r\n          return formValues.date?.doctors?.includes(item.id) && doctor;\r\n        }))\r\n        : mapStateToSelectList(state.doctors?.filter(item => {\r\n          const doctor = state.schedule?.find(elem => elem.doctor === item.id);\r\n          return item.specialization === formValues.specialization && doctor;\r\n        })),\r\n      name: 'doctor',\r\n      title: 'Выберите врача',\r\n      validate: isRequired,\r\n      type: 'select',\r\n      id: 3,\r\n      resetDeps: isKT ? [] : ['date'],\r\n      order: isKT ? 4 : 3,\r\n      deps: isKT ? ['clinic', 'specialization', 'date'] : ['clinic', 'specialization']},\r\n    {name: 'date',\r\n      title: 'Выберите дату приема',\r\n      validate: isRequired,\r\n      type: 'date',\r\n      id: 4,\r\n      values: formValues,\r\n      order: isKT ? 3 : 4,\r\n      state: state,\r\n      deps: isKT ? ['clinic', 'specialization'] : ['clinic', 'specialization', 'doctor']},\r\n  ];\r\n\r\n  const hasntValue = (item: (keyof TFormValues)[], parent: TFormValues): boolean => {\r\n    return item.some(elem => {\r\n      return !(elem in parent && parent[elem]);\r\n    })\r\n  };\r\n\r\n  const setInitialValues = () => {\r\n    const initialData = getDataFromInitialNode();\r\n    form.batch(() => {\r\n      const clinic = siteAddress === SiteAdresses.SITE_DEV ? ClinicIds.SITE_MAIN : ClinicIds.SITE_SECOND;\r\n      form.change('clinic', clinic);\r\n      const changeClinic = (spec: string) => {\r\n        const schedule = state.schedule?.find(item =>\r\n          item.specialization === spec && item.clinic === clinic);\r\n        if (!schedule) {\r\n          const thisClinic = state.clinics?.find(item => item.id !== clinic);\r\n          if (thisClinic) {\r\n            form.change('clinic', thisClinic.id);\r\n          }\r\n        }\r\n      }\r\n      if (initialData) {\r\n        if (initialData.specialization) {\r\n          form.change('specialization', initialData.specialization);\r\n          changeClinic(initialData.specialization);\r\n        }\r\n        if (initialData.doctor) {\r\n          const doctor = state.doctors?.find(item => item.id === initialData.doctor);\r\n          if (doctor) {\r\n            form.change('specialization', doctor.specialization);\r\n            form.change('doctor', initialData.doctor);\r\n            changeClinic(doctor.specialization);\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  const sortedSelectList = selectList.sort((a, b) => (a.order || 0) - (b.order || 0));\r\n\r\n  useEffect(() => {\r\n    if (!state.loading) {\r\n      setInitialValues();\r\n    }\r\n  }, [state.loading])\r\n\r\n  return (\r\n    <Stack spacing={2}>\r\n      {sortedSelectList.map(item => {\r\n        const disabled = item.deps ? hasntValue(item.deps, formValues) : false;\r\n        if (item.type === 'select') {\r\n          return (\r\n            <Select resetHandle={resetHandle} key={item.id} {...item} disabled={disabled} />\r\n          );\r\n        } else if (item.type === 'date') {\r\n          return (\r\n            <Calendar key={item.id} disabled={disabled} {...item as ICalendar} />\r\n          );\r\n        }\r\n      })}\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default DoctorSelect;","export const APIConstants = {\r\n  API_URL: process.env.NODE_ENV === 'production'\r\n    ? 'https://longavitas.ru/lib/widget/index.php' : '/data.json',\r\n  API_LOGIN: 'admin',\r\n  API_PASSWORD: 'admin'\r\n}","import { APIConstants } from \"./index.constant\";\r\nimport { TApiParams, TUrlParams } from \"./index.types\";\r\n\r\nclass API {\r\n  public async get(urlParams: TUrlParams): Promise<any> {\r\n    const params: TApiParams = {\r\n      method: 'GET',\r\n      params: urlParams\r\n    };\r\n    return this.request(params);\r\n  }\r\n\r\n  public async post(data: any, urlParams?: TUrlParams): Promise<any> {\r\n    const params: TApiParams = {\r\n      method: 'POST',\r\n      params: urlParams\r\n    };\r\n    return this.request(params, data);\r\n  }\r\n\r\n  private async request(params: TApiParams, data: any | undefined = undefined): Promise<any> {\r\n    try {\r\n      const url = APIConstants.API_URL + (params.params ? this.getParamsFromObject(params.params) : '');\r\n      const response = await fetch(url, {\r\n        method: params.method,\r\n        body: JSON.stringify(data),\r\n        headers: {\r\n          Authorization: \"Basic \" + btoa(APIConstants.API_LOGIN + ':' + APIConstants.API_PASSWORD),\r\n        }\r\n      })\r\n      return await response.json();\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  private getParamsFromObject(object: {[key: string]: string}): string {\r\n    const objectParams = Object.entries(object).map(item => item.join('='));\r\n    return '?' + objectParams.join('&');\r\n  }\r\n}\r\n\r\nexport default new API();","import API from './index';\r\n\r\nimport { TApiPayload } from \"../store/store.types\";\r\nimport { getISODate } from \"../utils/index.util\";\r\n\r\nexport const getData = async (date: Date | undefined = undefined): Promise<TApiPayload | undefined> => {\r\n  const startDate = getISODate(date ? new Date(date) : new Date());\r\n  return API.get({startDate});\r\n}\r\n\r\nexport const setAppointment = async (values: {[key: string]: string | number | boolean}): Promise<any> => {\r\n  // return API.post(values);\r\n  return true;\r\n}","import { TActionCreator, TApiPayload } from \"./store.types\";\r\nimport { ActionTypes } from \"./store.constants\";\r\n\r\nexport const setLoadingAC: TActionCreator<boolean> = (payload) => {\r\n  return {type: ActionTypes.SET_LOADING, payload};\r\n}\r\nexport const setDataAC: TActionCreator<TApiPayload> = (payload) => {\r\n  return {type: ActionTypes.SET_DATA, payload};\r\n}\r\nexport const setWidthAC: TActionCreator<number> = (payload) => {\r\n  return {type: ActionTypes.SET_WIDTH, payload};\r\n}\r\nexport const setAppointmentDataAC: TActionCreator<any> = (payload) => {\r\n  return {type: ActionTypes.SET_APPOINTMENT_DATA, payload};\r\n}","import { Reducer } from \"react\";\r\n\r\nimport { TAction, TAppState } from \"./store.types\";\r\nimport { ActionTypes } from \"./store.constants\";\r\n\r\nexport const initialState: TAppState = {\r\n  clinics: null,\r\n  schedule: null,\r\n  loading: false,\r\n  doctors: null,\r\n  specializations: null,\r\n  screenWidth: document.documentElement.clientWidth,\r\n  appointment: null,\r\n}\r\n\r\nexport const rootReducer: Reducer<TAppState, TAction<any>> = (state, action) => {\r\n  switch (action.type) {\r\n    case ActionTypes.SET_LOADING: {\r\n      return {...state, loading: action.payload};\r\n    }\r\n    case ActionTypes.SET_DATA: {\r\n      return {\r\n        ...state,\r\n        clinics: action.payload.clinics,\r\n        schedule: action.payload.schedule,\r\n        doctors: action.payload.doctors,\r\n        specializations: action.payload.specializations\r\n      };\r\n    }\r\n    case ActionTypes.SET_WIDTH: {\r\n      return {\r\n        ...state,\r\n        screenWidth: action.payload\r\n      };\r\n    }\r\n    case ActionTypes.SET_APPOINTMENT_DATA: {\r\n      return {\r\n        ...state,\r\n        appointment: action.payload\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import React, { FC } from 'react';\r\nimport { Field } from 'react-final-form';\r\n\r\nimport { FormHelperText, TextField } from \"@mui/material\";\r\nimport { IInput } from \"./input.types\";\r\n\r\nconst Input: FC<IInput> = (props) => {\r\n\r\n  return (\r\n    <Field name={props.name} validate={props.validate}>\r\n      {({ input, meta }) => (\r\n        <div>\r\n          <TextField\r\n            style={{width: '100%'}}\r\n            error={!!(meta.touched && meta.error)}\r\n            label={props.title}\r\n            {...input}\r\n          />\r\n          {meta.touched && meta.error\r\n            && <FormHelperText\r\n              className={'UMC-widget-input-error'}>\r\n              {meta.error}\r\n            </FormHelperText>}\r\n        </div>\r\n      )}\r\n    </Field>\r\n  );\r\n};\r\n\r\nexport default Input;","import React, { FC } from 'react';\r\nimport { Field } from 'react-final-form';\r\nimport { Checkbox, FormControlLabel, FormHelperText } from \"@mui/material\";\r\nimport { IInput } from \"./input.types\";\r\n\r\nconst Input: FC<IInput> = (props) => {\r\n  return (\r\n    <Field name={props.name} type={'checkbox'} validate={props.validate} >\r\n      {({ input, meta }) => (\r\n        <div>\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                {...input}\r\n                value={input.value || ''}\r\n              />\r\n            }\r\n            label={props.title} />\r\n            {meta.touched && meta.error\r\n              && <FormHelperText\r\n                  className={'UMC-widget-input-error'}>\r\n                {meta.error}\r\n              </FormHelperText>}\r\n        </div>\r\n      )}\r\n    </Field>\r\n  );\r\n};\r\n\r\nexport default Input;","import React, { FC } from 'react';\r\nimport { Field } from 'react-final-form';\r\nimport { IMaskInput } from \"react-imask\";\r\n\r\nimport { FormHelperText, OutlinedInput, InputLabel, FormControl } from \"@mui/material\";\r\nimport { IInput } from \"./input.types\";\r\n\r\nconst TextMaskCustom = React.forwardRef<HTMLElement, any>(\r\n  function TextMaskCustom(props, ref) {\r\n    const mask = props.mask || '+7 (000) 00-00-000';\r\n    const { value, onChange, ...other } = props;\r\n\r\n    return (\r\n      <IMaskInput\r\n        {...other}\r\n        onBlur={props.onBlur}\r\n        onFocus={props.onFocus}\r\n        onAccept={(value: string) => {\r\n          const val = value.replace(/\\D+/g,'');\r\n          props.onChange(val);\r\n        }}\r\n        id={props.id}\r\n        mask={mask}\r\n        inputRef={ref}\r\n        overwrite\r\n      />\r\n    );\r\n  },\r\n);\r\n\r\nconst MaskedInput: FC<IInput> = (props) => {\r\n  return (\r\n    <Field name={props.name} validate={props.validate}>\r\n      {({ input, meta }) => (\r\n        <FormControl>\r\n          <InputLabel\r\n            className={!props.disabled && meta.touched && meta.error && 'UMC-widget-input-error'}\r\n            htmlFor=\"number\">\r\n            {props.title}\r\n          </InputLabel>\r\n          <OutlinedInput\r\n            {...input}\r\n            label={props.title}\r\n            id={'number'}\r\n            error={!!(meta.touched && meta.error)}\r\n            inputComponent={TextMaskCustom as any}\r\n            inputProps={{\r\n              mask: props.mask,\r\n              name: props.name,\r\n            }}\r\n          />\r\n          {meta.touched && meta.error\r\n            && <FormHelperText\r\n                className={'UMC-widget-input-error'}>\r\n              {meta.error}\r\n            </FormHelperText>}\r\n        </FormControl>\r\n      )}\r\n    </Field>\r\n  );\r\n};\r\n\r\nexport default MaskedInput;","import React, { FC, useState } from 'react';\r\nimport { Stack, Button } from \"@mui/material\";\r\nimport { IInput } from \"../fields/input.types\";\r\nimport { TStepComponent } from \"../DoctorSelect/index.types\";\r\nimport Input from \"../fields/Input\";\r\nimport CheckboxInput from \"../fields/CheckboxInput\";\r\nimport { isLength, isRequired } from \"../../utils/validate.util\";\r\nimport MaskedInput from \"../fields/MaskedInput\";\r\n\r\nconst Personal: FC<TStepComponent> = () => {\r\n  const inputListArr: IInput[] = [\r\n    {name: 'name',\r\n      validate: isLength(2, 20),\r\n      title: 'Введите имя',\r\n      type: 'input',\r\n      visibility: true,\r\n      id: 1},\r\n    {name: 'surname',\r\n      validate: isLength(2, 20),\r\n      title: 'Введите фамилию',\r\n      type: 'input',\r\n      visibility: true,\r\n      id: 2},\r\n    {name: 'number',\r\n      validate: isLength(11, 11),\r\n      title: 'Введите телефон',\r\n      mask: '+7 (000) 00-00-000',\r\n      visibility: true,\r\n      type: 'input',\r\n      id: 3},\r\n    {name: 'birthday',\r\n      validate: isLength(8, 8),\r\n      title: 'Введите дату рождения',\r\n      type: 'input',\r\n      mask: Date,\r\n      visibleName: 'Дата рождения',\r\n      visibility: false,\r\n      id: 5},\r\n    {name: 'address',\r\n      title: 'Введите адрес',\r\n      type: 'input',\r\n      visibleName: 'Адрес',\r\n      visibility: false,\r\n      id: 6},\r\n    {name: 'comment',\r\n      title: 'Введите комментарий',\r\n      visibleName: 'Комментарий',\r\n      visibility: false,\r\n      type: 'input',\r\n      id: 7},\r\n    {name: 'confirm',\r\n      validate: isRequired,\r\n      visibility: true,\r\n      title: 'Я согласен с Политикой конфиденциальности',\r\n      type: 'checkbox',\r\n      id: 4},\r\n  ];\r\n\r\n  const [inputList, setInputList] = useState(inputListArr);\r\n\r\n  const changeInputVisibility = (name: string): void => {\r\n    setInputList(prev => {\r\n      return prev.map(item => {\r\n        if (item.name === name) {\r\n          return {...item, visibility: true};\r\n        }\r\n        return item;\r\n      })\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Stack spacing={2}>\r\n      {inputList.map(item => {\r\n        if (item.type === 'checkbox') {\r\n          return <CheckboxInput key={item.id} {...item} />;\r\n        }\r\n        if ('visibility' in item && !item.visibility) {\r\n          return (\r\n            <Button\r\n              key={item.id}\r\n              className={'UMC-widget__personal-btn'}\r\n              onClick={() => changeInputVisibility(item.name)}\r\n              size={'small'}>\r\n              {item.visibleName}\r\n            </Button>\r\n          )\r\n        }\r\n        if (item.mask) {\r\n          return <MaskedInput key={item.id} {...item} />;\r\n        }\r\n        return <Input key={item.id} {...item} />;\r\n      })}\r\n    </Stack>\r\n  );\r\n};\r\n\r\nexport default Personal;","import React, { FC } from 'react';\r\nimport { Button, DialogActions, DialogContent, Grid, Typography } from \"@mui/material\";\r\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\r\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\r\nimport { TAppState } from \"../../store/store.types\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { getVisibleDateTime } from \"../../utils/index.util\";\r\n\r\ntype TResult = {\r\n  state: TAppState;\r\n  btnCallback: () => void;\r\n}\r\n\r\ntype TResultParam = {\r\n  status: 'success' | 'error';\r\n}\r\n\r\nconst getResultText = (state: TAppState): string => {\r\n  if (!state.appointment || !state.doctors || !state.clinics) return '';\r\n  const doctor = state.doctors.find(item => item.id === state?.appointment?.doctor);\r\n  const clinic = state.clinics.find(item => item.id === state?.appointment?.clinic);\r\n  const date = getVisibleDateTime(state.appointment.date.date);\r\n  return `Вы записаны на прием к доктору ${doctor?.name} на ${date} в клинику ${clinic?.name}`;\r\n}\r\n\r\nconst Result: FC<TResult> = (props) => {\r\n  const params = useParams<TResultParam>();\r\n  const history = useHistory();\r\n  const isError = params.status === 'error';\r\n  const title = isError ? 'Произошла ошибка!' : 'Запись выполнена';\r\n  const text = isError\r\n    ? 'Возникла ошибка при работе виджета записи. Попробуйте еще раз или зайдите позднее'\r\n    : getResultText(props.state);\r\n  const Icon = isError ? ErrorOutlineIcon : CheckCircleOutlineIcon;\r\n  return (\r\n    <>\r\n      <DialogContent>\r\n        <Grid container style={{marginTop: 40}}>\r\n          <Grid item xs={2}>\r\n            <Icon fontSize={'large'} color={isError ? 'error' : 'primary'} />\r\n          </Grid>\r\n          <Grid item xs={10}>\r\n            <Typography style={{marginBottom: 20}} variant=\"h5\">{title}</Typography>\r\n            <Typography>{text}</Typography>\r\n          </Grid>\r\n        </Grid>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        {isError\r\n          ? <Button onClick={() => {\r\n            props.btnCallback();\r\n            history.push('/appointment')\r\n          }}>\r\n            Попробовать еще раз\r\n          </Button>\r\n          : <Button onClick={() => {\r\n              history.push('/')\r\n          }}>\r\n            Хорошо\r\n          </Button>\r\n        }\r\n      </DialogActions>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Result;","import React, {FC, useContext, useEffect, useReducer, useState} from 'react';\r\nimport {Form} from 'react-final-form';\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle, IconButton,\r\n  Step,\r\n  StepLabel,\r\n  Stepper,\r\n  Tooltip\r\n} from \"@mui/material\";\r\n\r\nimport DoctorSelect from \"../DoctorSelect\";\r\nimport { getData, setAppointment } from \"../../api/data.api\";\r\nimport { setAppointmentDataAC, setDataAC, setLoadingAC, setWidthAC } from \"../../store/action-creators\";\r\nimport {initialState, rootReducer} from \"../../store\";\r\n\r\nimport {TFormValues} from \"../../store/store.types\";\r\nimport {TStep} from \"./index.types\";\r\nimport {TStepComponent} from \"../DoctorSelect/index.types\";\r\nimport {SITE_ADDRESS} from \"../../App\";\r\nimport Personal from \"../Personal\";\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { formatFormValues } from \"../../utils/index.util\";\r\nimport { FormApi } from \"final-form\";\r\nimport { Route, useHistory } from \"react-router-dom\";\r\nimport Result from \"../Result\";\r\n\r\nconst Widget: FC = () => {\r\n\r\n  const [isOpen, _] = useState(true);\r\n  const [count, setCount] = useState(0);\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [state, dispatch] = useReducer(rootReducer, initialState);\r\n  const siteAddress = useContext(SITE_ADDRESS);\r\n  const history = useHistory();\r\n\r\n  const initialValues: any = {\r\n    confirm: true,\r\n  };\r\n\r\n  const steps: TStep[] = [\r\n    {id: 0, title: 'Выбор врача'},\r\n    {id: 1, title: 'Личные данные'},\r\n  ];\r\n\r\n  const stepsContent: FC<TStepComponent>[] = [\r\n    DoctorSelect,\r\n    Personal\r\n  ];\r\n\r\n  const VisibleComponent = stepsContent[activeStep];\r\n\r\n  const makeAppointment = async (values: TFormValues): Promise<any> => {\r\n    const sendValues = formatFormValues(values, siteAddress);\r\n    return setAppointment(sendValues);\r\n  }\r\n\r\n  const handleSubmit = async (values: TFormValues, form: FormApi<TFormValues>): Promise<void> => {\r\n    if (activeStep) {\r\n      const result = await makeAppointment(values);\r\n      if (result) {\r\n        dispatch(setAppointmentDataAC(values));\r\n        form.reset();\r\n        history.push('/appointment/success');\r\n      } else {\r\n        history.push('/appointment/error');\r\n      }\r\n    } else {\r\n      setActiveStep(1);\r\n    }\r\n  }\r\n\r\n  const localGetData = async () => {\r\n    dispatch(setLoadingAC(true));\r\n    const result = await getData();\r\n    if (result) {\r\n      dispatch(setDataAC(result));\r\n    } else {\r\n      history.push('/appointment/error');\r\n    }\r\n    dispatch(setLoadingAC(false));\r\n  }\r\n\r\n  const btnCallback = (): void => {\r\n    setCount(prev => ++prev);\r\n  }\r\n\r\n  const changeWindowWidth = () => {\r\n    dispatch(setWidthAC(document.documentElement.clientWidth));\r\n  }\r\n\r\n  useEffect(() => {\r\n    localGetData();\r\n  }, [count]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', changeWindowWidth);\r\n    return () => {\r\n      window.removeEventListener('resize', changeWindowWidth)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <Dialog maxWidth=\"xl\" open={isOpen} fullScreen={state.screenWidth <= 450}>\r\n      <div className={'UMC-widget-wrapper'}>\r\n        <DialogTitle>\r\n          Запись на прием\r\n          <IconButton\r\n            className={'UMC-widget__btn-exit'}\r\n            onClick={() => history.push('/')}\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        </DialogTitle>\r\n        <Route path={'/appointment/:status'}>\r\n          <Result state={state} btnCallback={btnCallback} />\r\n        </Route>\r\n        <Route path={'/appointment'} exact>\r\n        <Form onSubmit={handleSubmit} initialValues={initialValues}>\r\n          {({handleSubmit, form, values, touched, hasValidationErrors}) => {\r\n            const resetFields = (fields: (keyof TFormValues)[] | undefined) => {\r\n              if (fields) {\r\n                form.batch(() => {\r\n                  fields.forEach(item => form.change(item, ''))\r\n                });\r\n              }\r\n            }\r\n            return (\r\n              <form onSubmit={handleSubmit}>\r\n                <DialogContent>\r\n                  <Stepper orientation={state.screenWidth < 450 ? 'vertical' : 'horizontal'} className={'UMC-widget-steps__header'} activeStep={activeStep}>\r\n                    {steps.map(item => {\r\n                      const completed = item.id <= activeStep;\r\n                      return (\r\n                        <Step completed={completed} key={item.id}>\r\n                          <StepLabel>{item.title}</StepLabel>\r\n                        </Step>\r\n                      );\r\n                    })}\r\n                  </Stepper>\r\n                  <Box className={'UMC-widget-content'}>\r\n                    <VisibleComponent resetHandle={resetFields} state={state} />\r\n                  </Box>\r\n                </DialogContent>\r\n                <DialogActions className={'UMC-widget-btn-area'}>\r\n                  {activeStep\r\n                    ? <Button\r\n                      onClick={() => setActiveStep(0)}\r\n                      startIcon={<ArrowBackIcon />}\r\n                      type={'button'}>\r\n                      Назад\r\n                    </Button>\r\n                    : <></>}\r\n                  <Tooltip\r\n                    placement={'top'}\r\n                    title={touched && hasValidationErrors ? 'Заполните все обязательные поля' : ''}>\r\n                    <Button type={'submit'}>{activeStep ? 'Записаться' : 'Следующий шаг'}</Button>\r\n                  </Tooltip>\r\n                </DialogActions>\r\n              </form>\r\n            );\r\n          }}\r\n        </Form>\r\n      </Route>\r\n      </div>\r\n      {state.loading && <Box className={'UMC-widget-loading-screen'} sx={{display: 'flex'}}>\r\n          <CircularProgress/>\r\n      </Box>}\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default Widget;","import React, { FC } from 'react';\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Widget from \"./components/Widget\";\r\n\r\nconst Paths: {[key: string]: string} = {\r\n  default: '/appointment'\r\n}\r\n\r\nexport const SITE_ADDRESS = React.createContext(window.location.origin);\r\n\r\nconst App: FC = () => {\r\n  return (\r\n    <Switch>\r\n      <Route path={Paths.default}><Widget /></Route>\r\n    </Switch>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { HashRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <HashRouter hashType={'noslash'}>\r\n    <App />\r\n  </HashRouter>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}