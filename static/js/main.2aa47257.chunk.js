(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{123:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),i=n.n(c),s=n(45),o=n.n(s),u=(n(123),n(16)),l=n(18),d=n.n(l),j=n(34),p=n(13),b=n(29),h=n(205),f=n(206),m=n(207),O=n(193),v=n(210),x=n(189),g=n(211),w=n(212),_=n(213),C=n(185),y=n(197),M=n(15),S=n(184),D=n(196),N=n(192),U=n(186),E=n(191),I=n(201),T=n(2),A=function(e){var t=e.resetHandle,n=e.resetDeps,a=e.list,r=e.name,c=e.title,i=e.validate,s=e.disabled,o=a||[];return Object(T.jsx)(b.a,{name:r,validate:i,children:function(e){var i=e.input,u=e.meta;return Object(T.jsx)(C.a,{title:s?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043b\u044f":"",children:Object(T.jsxs)(D.a,{children:[Object(T.jsx)(N.a,{className:!s&&u.touched&&u.error&&"UMC-widget-input-error",htmlFor:r,children:a?c:Object(T.jsx)(y.a,{})}),Object(T.jsx)(U.a,Object(M.a)(Object(M.a)({error:!(!u.touched||!u.error),disabled:s},i),{},{onChange:function(e){t&&t(n),i.onChange(e.target.value)},label:c,className:"UMC-widget-input UMC-widget-select",children:o.map((function(e){return Object(T.jsx)(E.a,{value:e.value,children:e.name},e.id)}))})),!s&&u.touched&&u.error&&Object(T.jsx)(I.a,{className:"UMC-widget-input-error",children:u.error})]})})}})},k=function(e){return e?e.map((function(e){return"string"===typeof e?{id:e,value:e,name:e}:{id:e.id,value:e.id,name:e.name}})):[]},z=function(e){return e<10?"0"+e:String(e)},F=function(e){return z(e.getHours())+":"+z(e.getMinutes())},L=new Date,P=function(e,t){var n=e.getMonth(),a=new Date(e),r=function(e){return function(t){return!(t<L)&&!!e&&e.some((function(e){return!!e&&e.some((function(e){var n=new Date(e[0]);return H(t,n)}))}))}}(t);a.setDate(1);for(var c=function(e){var t=[];if(1!==e){var n={name:0,free:!1,empty:!0};if(0===e)for(var a=0;a<6;a++)t.push(n);else for(var r=1;r<e;r++)t.push(n)}return t}(a.getDay());a.getMonth()===n;){var i={name:a.getDate(),free:r(a)};c.push(i),a.setDate(a.getDate()+1)}return c},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return!(!e||!t)&&(e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear())},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return!(!e||!t)&&(e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes())},R=n(195),Y=n(202),V=n(204),q=n(181),W=n(182),B=n(183);!function(e){e.SITE_MAIN="https://longavitas.ru",e.SITE_SECOND="https://longavita-ct.ru",e.SITE_DEV="http://localhost:3000"}(a||(a={})),function(e){e.SITE_MAIN="058826cf-b50f-11e9-a205-ac1f6b67f28a",e.SITE_SECOND="9d050044-1007-11ec-a220-ac1f6b67f28a"}(r||(r={}));var J,K=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],Q=["\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431","\u0412\u0441"],X=function(e){var t,n,a=e.name,r=e.title,i=e.validate,s=e.disabled,o=e.state,u=Object(c.useState)(!1),l=Object(p.a)(u,2),d=l[0],j=l[1],O=Object(c.useState)(new Date),v=Object(p.a)(O,2),x=v[0],g=v[1],w=Object(c.useState)(null),_=Object(p.a)(w,2),y=_[0],M=_[1],S=Object(b.c)("doctor"),U=S.input.value?[null===o||void 0===o||null===(t=o.doctors)||void 0===t?void 0:t.find((function(e){return e.id===S.input.value})).time]:null===o||void 0===o||null===(n=o.doctors)||void 0===n?void 0:n.map((function(e){return e.time})),E=Object(c.useMemo)((function(){return P(x,U)}),[S.input.value,x]),A=Object(c.useMemo)((function(){return function(e,t){if(!t||!e)return[];var n=[];return t.forEach((function(t){null===t||void 0===t||t.forEach((function(t){t.forEach((function(t){var a=new Date(t);H(a,e)&&n.push(a)}))}))})),Array.from(new Set(n))}(y,U)}),[y,S.input.value]),k=function(e){j(e)},L=function(e){g(e?function(e){var t=new Date(e);return t.setMonth(e.getMonth()+1),t}:function(e){var t=new Date(e);return t.setMonth(e.getMonth()-1),t})};return Object(T.jsx)(b.a,{name:a,validate:i,children:function(e){var t=e.input,n=e.meta,a=function(e){return e?z(e.getDate())+"."+z(e.getMonth()+1)+"."+e.getFullYear()+" "+z(e.getHours())+":"+z(e.getMinutes()):""}(t.value),c="inherit";return n.touched&&n.error&&(c="error"),s&&(c="disabled"),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(C.a,{title:s?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043b\u044f":"",children:Object(T.jsxs)(D.a,{variant:"outlined",children:[Object(T.jsx)(N.a,{className:!s&&n.touched&&n.error&&"UMC-widget-input-error",htmlFor:"date",children:r}),Object(T.jsx)(R.a,{error:!(!n.touched||!n.error),onFocus:function(){return k(!0)},id:"date",type:"text",value:a,onChange:function(){return console.log(t.value)},disabled:s,endAdornment:Object(T.jsx)(Y.a,{position:"end",children:Object(T.jsx)(V.a,{disabled:s,onClick:function(){return k(!0)},edge:"end",children:Object(T.jsx)(q.a,{color:c})})}),label:r}),!s&&n.touched&&n.error&&Object(T.jsx)(I.a,{className:"UMC-widget-input-error",children:n.error})]})}),Object(T.jsx)(h.a,{onClose:function(){return k(!1)},open:d,disableRestoreFocus:!0,children:Object(T.jsxs)("div",{className:"UMC-widget-calendar-wrapper",children:[Object(T.jsx)(f.a,{children:Object(T.jsxs)("div",{className:"UMC-widget-calendar-header",children:[Object(T.jsx)(V.a,{onClick:function(){return L(!1)},children:Object(T.jsx)(W.a,{})}),Object(T.jsxs)("div",{className:"UMC-widget-calendar-header__text UMC-widget-title",children:[K[x.getMonth()]," ",x.getFullYear()]}),Object(T.jsx)(V.a,{onClick:function(){return L(!0)},children:Object(T.jsx)(B.a,{})})]})}),Object(T.jsxs)(m.a,{children:[Object(T.jsxs)("div",{className:"UMC-widget-calendar-block",children:[Object(T.jsx)("div",{className:"UMC-widget-calendar__header UMC-widget-calendar__grid",children:Q.map((function(e){return Object(T.jsx)("div",{className:"UMC-widget-calendar__box UMC-widget-calendar__box_header",children:e},e)}))}),Object(T.jsx)("div",{className:"UMC-widget-calendar__grid",children:E.map((function(e){var t=new Date(x);t.setDate(e.name);var n=H(t);return H(t,y)?Object(T.jsx)("div",{className:"UMC-widget-calendar__box UMC-widget-calendar__box_selected",children:e.name},e.name):e.free?Object(T.jsx)("div",{className:"UMC-widget-calendar__box UMC-widget-calendar__box_free",onClick:function(){return M(t)},children:e.name},e.name):e.empty?Object(T.jsx)("p",{},e.name):Object(T.jsx)("div",{className:n?"UMC-widget-calendar__box UMC-widget-calendar__box_busy UMC-widget-calendar__box_outlined":"UMC-widget-calendar__box UMC-widget-calendar__box_busy",children:e.name},e.name)}))})]}),y&&Object(T.jsxs)("div",{className:"UMC-widget-time-block",children:[Object(T.jsx)("div",{className:"UMC-widget-title UMC-widget-time__title",children:"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u0438\u0435\u043c\u0430:"}),Object(T.jsx)("div",{className:"UMC-widget-time",children:A.map((function(e){return Object(T.jsx)("time",{onClick:function(){return function(e){t.onChange(e),j(!1)}(e)},className:G(e,t.value)?"UMC-widget-time__box UMC-widget-time__box_selected":"UMC-widget-time__box",children:F(e)},e.toDateString())}))})]})]})]})})]})}})},Z=function(e){if(!e)return"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){return n?n.length<e?"\u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ".concat(e," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):n.length>t?"\u0414\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 ".concat(t," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):void 0:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"}},ee=function(e){var t,n=e.resetHandle,a=e.state,r=e.getData,i=Object(b.d)().getState().values,s=i.clinic,o=[{list:k(a.clinics),name:"clinic",validate:Z,title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0438\u043b\u0438\u0430\u043b",type:"select",resetDeps:["specialization","doctor","date"],id:1},{list:k(a.specializations),name:"specialization",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e",validate:Z,type:"select",id:2,resetDeps:["doctor","date"],deps:["clinic"]},{list:k(null===(t=a.doctors)||void 0===t?void 0:t.filter((function(e){return e.specialization===i.specialization}))),name:"doctor",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0430\u0447\u0430",validate:Z,type:"select",id:3,resetDeps:["date"],deps:["clinic","specialization"]},{name:"date",title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u043c\u0430",validate:Z,type:"date",id:4,state:a,deps:["clinic","specialization","doctor"]}];return Object(c.useEffect)((function(){s&&r(s)}),[s]),Object(T.jsx)(S.a,{spacing:2,children:o.map((function(e){var t=!!e.deps&&function(e,t){return e.some((function(e){return!(e in t&&t[e])}))}(e.deps,i);return"select"===e.type?Object(T.jsx)(A,Object(M.a)(Object(M.a)({resetHandle:n},e),{},{disabled:t}),e.id):"date"===e.type?Object(T.jsx)(X,Object(M.a)({disabled:t},e),e.id):void 0}))})},te=n(69),ne=n(70);!function(e){e.API_URL="https://longavitas.ru/lib/widget/send.php",e.API_LOGIN="admin",e.API_PASSWORD="admin"}(J||(J={}));var ae,re=function(){function e(){Object(te.a)(this,e)}return Object(ne.a)(e,[{key:"get",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",params:t},e.abrupt("return",this.request(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",params:n},e.abrupt("return",this.request(a,t));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,r,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:void 0,e.prev=1,a=J.API_URL+(t.params?this.getParamsFromObject(t.params):""),e.next=5,fetch(a,{method:t.method,body:n,headers:{Authorization:"Basic "+btoa(J.API_LOGIN+":"+J.API_PASSWORD)}});case 5:return r=e.sent,e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getParamsFromObject",value:function(e){return"?"+Object.entries(e).map((function(e){return e.join("=")})).join("&")}}]),e}(),ce=new re,ie=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ce.get({type:"clinic"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date,n=a.getFullYear()+"-"+z(a.getMonth()+1)+"-"+z(a.getDate())+"T"+z(a.getHours())+":"+z(a.getMinutes())+":00",e.abrupt("return",ce.get({type:"time",clinicId:t,startDate:n}));case 2:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.SET_CLINICS="SET_CLINICS",e.SET_LOADING="SET_LOADING",e.SET_DATA="SET_DATA"}(ae||(ae={}));var oe=function(e){return{type:ae.SET_LOADING,payload:e}},ue=function(e){return{type:ae.SET_DATA,payload:e}},le={clinics:null,loading:!1,doctors:null,specializations:null},de=function(e,t){switch(t.type){case ae.SET_CLINICS:return Object(M.a)(Object(M.a)({},e),{},{clinics:t.payload});case ae.SET_LOADING:return Object(M.a)(Object(M.a)({},e),{},{loading:t.payload});case ae.SET_DATA:return Object(M.a)(Object(M.a)({},e),{},{doctors:t.payload.doctors,specializations:t.payload.specializations});default:return e}},je=n(208),pe=function(e){return Object(T.jsx)(b.a,{name:e.name,validate:e.validate,children:function(t){var n=t.input,a=t.meta;return Object(T.jsxs)("div",{children:[Object(T.jsx)(je.a,Object(M.a)({style:{width:"100%"},error:!(!a.touched||!a.error),label:e.title},n)),a.touched&&a.error&&Object(T.jsx)(I.a,{className:"UMC-widget-input-error",children:a.error})]})}})},be=n(209),he=n(188),fe=function(e){return Object(T.jsx)(b.a,{name:e.name,type:"checkbox",validate:e.validate,children:function(t){var n=t.input,a=t.meta;return Object(T.jsxs)("div",{children:[Object(T.jsx)(be.a,{control:Object(T.jsx)(he.a,Object(M.a)(Object(M.a)({},n),{},{value:n.value||""})),label:e.title}),a.touched&&a.error&&Object(T.jsx)(I.a,{className:"UMC-widget-input-error",children:a.error})]})}})},me=function(){var e=[{name:"name",validate:$(2,20),title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",type:"input",id:1},{name:"surname",validate:$(2,20),title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",type:"input",id:2},{name:"number",validate:$(2,20),title:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",type:"input",id:3},{name:"confirm",validate:Z,title:"\u042f \u0441\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u0441 \u041f\u043e\u043b\u0438\u0442\u0438\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438",type:"checkbox",id:4}];return Object(T.jsx)(S.a,{spacing:2,children:e.map((function(e){return"checkbox"===e.type?Object(T.jsx)(fe,Object(M.a)({},e),e.id):Object(T.jsx)(pe,Object(M.a)({},e),e.id)}))})},Oe=n(96),ve=n.n(Oe),xe=function(){var e=Object(c.useState)(!0),t=Object(p.a)(e,2),n=t[0],i=(t[1],Object(c.useState)(0)),s=Object(p.a)(i,2),o=s[0],u=s[1],l=Object(c.useReducer)(de,le),M=Object(p.a)(l,2),S=M[0],D=M[1],N={clinic:Object(c.useContext)(we)===a.SITE_DEV?r.SITE_MAIN:r.SITE_SECOND,confirm:!0},U=[{id:0,title:"\u0412\u044b\u0431\u043e\u0440 \u0432\u0440\u0430\u0447\u0430"},{id:1,title:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}],E=[ee,me][o],I=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o?console.log(t):u(1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(oe(!0)),e.next=3,ie();case 3:t=e.sent,D((n=t,{type:ae.SET_CLINICS,payload:n})),D(oe(!1));case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(oe(!0)),e.next=3,se(t);case 3:n=e.sent,a={doctors:[],specializations:[]},n.forEach((function(e){var t={id:e.employee.id,time:e.time,name:e.employee.name,specialization:e.employee.spec};e.employee.spec&&(a.doctors.push(t),a.specializations.includes(e.employee.spec)||a.specializations.push(e.employee.spec))})),D(ue(a)),D(oe(!1));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){S.clinics||A()}),[]),Object(T.jsxs)(h.a,{maxWidth:"xl",open:n,children:[Object(T.jsx)(b.b,{onSubmit:I,initialValues:N,children:function(e){var t=e.handleSubmit,n=e.form,a=(e.values,e.touched),r=e.hasValidationErrors;return Object(T.jsxs)("form",{className:"UMC-widget-wrapper",onSubmit:t,children:[Object(T.jsx)(f.a,{children:"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0430 \u043f\u0440\u0438\u0435\u043c"}),Object(T.jsxs)(m.a,{children:[Object(T.jsx)(O.a,{className:"UMC-widget-steps__header",activeStep:o,children:U.map((function(e){var t=e.id<=o;return Object(T.jsx)(v.a,{completed:t,children:Object(T.jsx)(x.a,{children:e.title})},e.id)}))}),Object(T.jsx)(g.a,{className:"UMC-widget-content",children:Object(T.jsx)(E,{resetHandle:function(e){e&&n.batch((function(){e.forEach((function(e){return n.change(e,"")}))}))},getData:k,state:S})})]}),Object(T.jsxs)(w.a,{className:"UMC-widget-btn-area",children:[o?Object(T.jsx)(_.a,{onClick:function(){return u(0)},startIcon:Object(T.jsx)(ve.a,{}),type:"button",children:"\u041d\u0430\u0437\u0430\u0434"}):Object(T.jsx)(T.Fragment,{}),Object(T.jsx)(C.a,{placement:"top",title:a&&r?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f":"",children:Object(T.jsx)(_.a,{type:"submit",children:o?"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433"})})]})]})}}),S.loading&&Object(T.jsx)(g.a,{className:"UMC-widget-loading-screen",sx:{display:"flex"},children:Object(T.jsx)(y.a,{})})]})},ge="/",we=i.a.createContext(window.location.origin),_e=function(){return Object(T.jsx)(u.c,{children:Object(T.jsx)(u.a,{path:ge,children:Object(T.jsx)(xe,{})})})},Ce=n(80);o.a.render(Object(T.jsx)(Ce.a,{hashType:"noslash",children:Object(T.jsx)(_e,{})}),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.2aa47257.chunk.js.map